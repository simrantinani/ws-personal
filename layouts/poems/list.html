{{ define "main" }}
<main id="main" class="poems">
  <div class="poems-page">

    <header class="poems-header">
      <h1>Poems</h1>
      <p class="poems-subhead">A small collection of poems</p>
    </header>

    {{/* Build a list of poem pages (newest first). Skip any node/index pages. */}}
    {{ $poems := .Pages.ByDate.Reverse }}
    {{ $poems = where $poems "IsNode" "ne" true }}

    {{ if gt (len $poems) 0 }}
      
      <!-- Poems Grid -->
      <div class="poems-grid">
        {{ range $poems }}
          <a href="{{ .RelPermalink }}" class="poem-card">
            <div class="poem-card-image">
              {{ with .Params.image }}
                <img src="{{ . }}" alt="{{ $.Title }}" loading="lazy" />
              {{ else }}
                {{ with $.Site.Params.defaultPoemThumb }}
                  <img src="{{ . }}" alt="{{ $.Title }}" loading="lazy" />
                {{ else }}
                  <div class="poem-placeholder">
                    <i class="fas fa-feather-alt"></i>
                  </div>
                {{ end }}
              {{ end }}
            </div>
            
            <div class="poem-card-content">
              <h3 class="poem-card-title">{{ .Title }}</h3>
              {{ with .Date }}
                <time datetime="{{ .Format "2006-01-02" }}" class="poem-card-date">
                  {{ .Format "Jan 2, 2006" }}
                </time>
              {{ end }}
              {{ with .Summary }}
                <p class="poem-card-excerpt">{{ . }}</p>
              {{ end }}
            </div>
          </a>
        {{ end }}
      </div>

    {{ else }}
      <p class="no-poems">No poems yet.</p>
    {{ end }}

  </div>
</main>
{{ end }}